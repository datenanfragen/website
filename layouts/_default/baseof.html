<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    {{ if .Site.Params.devMode }}
    <meta name="robots" content="noindex" />
    {{ end }}

    <title>
        {{- block "title" . -}}
        {{ if .Params._title }}{{ .Params._title }}{{ else }}{{ if .Title }}{{ .Title }}{{ else if .Params.name }}{{ .Params.name }}{{ end }}
        Â· {{ .Site.Title }}{{ end }}
        {{- end -}}
    </title>

    {{ if .IsTranslated -}}
    {{ range .Translations -}}
    <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">
    {{ end -}}
    {{- end }}
    <link rel="alternate" hreflang="{{ .Lang }}" href="{{ .Permalink }}">

    <link rel="preconnect" href="https://static.dacdn.de">
    <!-- To generate the SRIs: `openssl dgst -sha384 -binary FILENAME | openssl base64 -A` -->
    <link rel="preload" as="font" crossorigin="anonymous" integrity="sha384-tNBae8zgEksCqZQj7CBECeZFk2QtL2mxVPeHSxF75N/wvJzzmQHcZzv7F/X/fp5C" type="font/woff2" href="https://static.dacdn.de/fonts/fira-go/FiraGO-1001-Regular.woff2">
    <link rel="preload" as="font" crossorigin="anonymous" integrity="sha384-+OpL6cf+m9YfQ7ygI08Ss1/7tIegMPGBWnHayunHLqV5SKsNylANZ4+PeiVC5SSN" type="font/woff2" href="https://static.dacdn.de/fonts/fira-go/FiraGO-1001-SemiBold.woff2">
    <link rel="preload" as="font" crossorigin="anonymous" integrity="sha384-OweSPaeB1JE8kKcxBY0uMLQ+uMLCkQkkxItLG7y88xrf/KREX5J3LrjBXdGrrh1v" type="font/woff2" href="https://static.dacdn.de/fonts/fira-go/FiraGO-1001-Italic.woff2">
    <link rel="preload" as="font" crossorigin="anonymous" integrity="sha384-sWa20lMbvqJHIjx/smLcYHI2mJE8aJTZ1nvZaP6APJ0D45qxe+r7+/UYGy47CuLc" type="font/woff2" href="https://static.dacdn.de/fonts/spartan-mb/SpartanMB-1005-ExtraBold.woff">
    {{ if eq .Type "generator" -}}
    {{- end }}
    {{ $style := resources.Get "styles/main.scss" | toCSS (dict "enableSourceMap" .Site.Params.devMode) | postCSS (dict "config" "postcss.config.js" "noMap" true) | minify | fingerprint }}
    {{ $style_link := $style.RelPermalink | absURL }}
    {{ if (or (eq hugo.Environment "production") (eq hugo.Environment "staging")) }}
        {{ $style_link = $style_link | replaceRE "\\.[^\\.]*(\\.[^\\.]*)$" "$1" }}
    {{ end }}
    <link rel="stylesheet" href="{{ $style_link }}" integrity="{{ $style.Data.Integrity }}">

    {{ partial "head/meta.html" . }}
    {{ partial "head/favicons.html" . }}
    {{ block "head" . }}{{ end }}
</head>

<body>
    <aside id="flash-messages"></aside>
    <header id="nav-header">
        <div id="nav-header-bg"></div>
        <div id="header-main" class="container">
            <a href="{{ "/" | absURL }}" title="{{ T "logo-a-title" . }}" style="position: relative;">
                {{ with imageConfig (replace (printf "static/%s" (T "logo")) ".svg" ".png") }}
                    <img id="logo" src="{{ T "logo" . | absURL }}" title="{{ T "logo-title" . }}" height="{{ .Height }}" width="{{ .Width }}">
                {{ end }}
                {{ if .Site.Params.devMode }}
                    <span class="dev-mode-indicator" style="font-family: monospace; font-weight: bold; color: #d53f8c; position: absolute; bottom: 22px; right: -25px;">DEV</span>
                {{ end }}
            </a>
            <nav id="main-nav">
                <div id="menu-items">
                    <a href="{{ "company" | absURL }}" class="menu-link desktop-only">{{ T "header-cdb" }}</a>
                    <a href="{{ "blog" | absURL }}" class="menu-link desktop-only">{{ T "header-blog" }}</a>

                    <a class="{{ if .IsHome }}button button-primary icon icon-letter {{ end }}menu-link desktop-only"
                        href="{{ "generator" | absURL }}">{{ T "header-generator" }}</a>
                    <div class="dropdown-container">
                        <a class="button button-secondary menu-link" href="javascript:void(0)"><span
                                class="icon icon-menu" title="{{ T "header-open-menu" . }}"></span></a>
                        <div class="dropdown" id="personal-menu">
                            <div class="mobile-only">
                                <a class="button button-primary icon icon-letter menu-link"
                                    href="{{ "generator" | absURL }}"
                                    style="border-radius: 0;">{{ T "header-generator" }}</a>
                                <a href="{{ "company" | absURL }}" class="menu-link">{{ T "header-cdb" }}</a>
                                <a href="{{ "blog" | absURL }}" class="menu-link">{{ T "header-blog" }}</a>
                            </div>
                            <a href="{{ "my-requests" | absURL }}" class="menu-link">{{ T "header-my-requests" }}</a>
                            <a href="{{ "id-data-controls" | absURL }}"
                                class="menu-link">{{ T "header-id-data-controls" }}</a>
                            <a href="{{ "privacy-controls" | absURL }}"
                                class="menu-link">{{ T "header-privacy-controls" }}</a>

                            <div id="personal-menu-i18n-widget" class="i18n-widget-container"></div>
                        </div>
                    </div>
                </div>
            </nav>
            <div class="clearfix"></div>
        </div>
        {{ if .IsHome }}
            <div id="home-hero-bg"></div>
        {{ else }}
            <div id="heading-bg">
                {{ block "header-with-bg" . }}
                    <div id="heading" class="container">
                        <h1>{{ block "heading" . }}{{ .Title }}{{ end }}</h1>
                    </div>
                {{ end }}
            </div>
        {{ end }}
    </header>

    <div class="container">
        {{ block "main" . }}
        {{ end }}
    </div>

    <!-- TODO: Move the whole footer into a partial and call with partialCached. -->
    <!-- Generate a footer link. Links are automatically resolved to the correct translated language version and will
         fall back to English if no translated version exists.
         Parameters (in order): [slug] (not translated), [translation key of link text], [document fragment] (optional) -->
    {{ define "partials/footer-url" }}
        {{ $link := (partial "functions/link" (dict "slug" (index . 0) "text" (index . 1) "fragment" (index . 2) "translate" true)) }}
        <li><a href="{{ $link.url }}">{{ $link.text }}</a></li>
    {{ end }}

    <footer id="footer">
        <div class="container">
            <div class="col33 footer-col" style="padding-right: 20px;">
                <p style="margin: 0;">{{ T "footer-about-us" | safeHTML }}</p>
                <div class="social-icons">
                    <a href="{{ "/blog/index.xml" | absLangURL }}" class="icon icon-rss" title="{{ T "footer-social-rss-desc" . }}"><span class="sr-only">{{ T "footer-social-rss-desc" . }}</span></a>
                    <a rel="me" href="https://github.com/datenanfragen/" class="icon icon-github" title="{{ T "footer-social-github-desc" . }}"><span class="sr-only">{{ T "footer-social-github-desc" . }}</span></a>
                    <a href="https://matrix.to/#/+datenanfragen:matrix.altpeter.me" class="icon icon-matrix" title="{{ T "footer-social-matrix-desc" . }}"><span class="sr-only">{{ T "footer-social-matrix-desc" . }}</span></a>
                    <a rel="me" href="{{ cond (eq .Lang "de") "https://mastodon.social/@DatenanfragenDE" "https://mastodon.social/@datarequestsORG" }}" class="icon icon-mastodon" title="{{ T "footer-social-mastodon-desc" . }}"><span class="sr-only">{{ T "footer-social-mastodon-desc" . }}</span></a>
                    <a rel="me" href="{{ cond (eq .Lang "de") "https://twitter.com/@DatenanfragenDE" "https://twitter.com/datarequestsORG" }}" class="icon icon-twitter" title="{{ T "footer-social-twitter-desc" . }}"><span class="sr-only">{{ T "footer-social-twitter-desc" . }}</span></a>
                </div>
                <div class="i18n-button-container"></div>
            </div>
            <div class="footer-row">
                <div class="col22 footer-col">
                    <strong>{{ T "footer-tab-website-name" . }}</strong>
                    <ul>
                        {{ partial "footer-url" (slice "/generator" "footer-request-generator") }}
                        {{ partial "footer-url" (slice "/my-requests" "footer-my-requests") }}
                        {{ partial "footer-url" (slice "/id-data-controls" "footer-my-saved-data") }}
                        {{ partial "footer-url" (slice "/company" "footer-company-database") }}
                        <!-- {.{ partial "footer-url" (slice "/settings" "footer-settings") }} -->
                    </ul>
                </div>
                <div class="col22 footer-col">
                    <strong>{{ T "footer-tab-community" . }}</strong>
                    <ul>
                        {{ partial "footer-url" (slice "/contribute" "footer-contribute") }}
                        {{ partial "footer-url" (slice "/donate" "footer-donate") }}
                        {{ partial "footer-url" (slice "/verein/become-a-member" "footer-become-a-member") }}
                        {{ partial "footer-url" (slice "/open-source" "footer-open-source") }}
                        {{ partial "footer-url" (slice "/open-source" "footer-contributors" "contributors") }}
                    </ul>
                </div>
                <div class="col22 footer-col">
                    <strong>{{ T "footer-tab-association" . }}</strong>
                    <ul>
                        {{ partial "footer-url" (slice "/verein" "footer-association-overview") }}
                        {{ partial "footer-url" (slice "/verein/mission-statement" "footer-association-goals") }}
                        {{ partial "footer-url" (slice "/verein/constitution" "footer-association-constitution") }}
                        {{ partial "footer-url" (slice "/verein/transparency" "footer-association-transparency") }}
                        {{ partial "footer-url" (slice "/verein/board" "footer-association-board") }}
                    </ul>
                </div>
            </div>
            <div class="footer-row">
                <div class="col22 footer-col">
                    <strong>{{ T "footer-tab-learn" . }}</strong>
                    <ul>
                        {{ partial "footer-url" (slice "/blog/your-gdpr-rights" "footer-your-gdpr-rights") }}
                        {{ partial "footer-url" (slice "/sample-letters" "footer-sample-letters") }}
                        {{ partial "footer-url" (slice "/supervisory-authorities" "footer-supervisory-authorities") }}
                        {{ partial "footer-url" (slice "/blog" "footer-posts") }}
                        {{ partial "footer-url" (slice "/verein/press" "footer-press") }}
                        {{ partial "footer-url" (slice "/verein/event" "footer-event") }}
                        {{ if eq .Lang "de" }}{{ partial "footer-url" (slice "/verein/material" "footer-material") }}{{ end }}
                    </ul>
                </div>
                <div class="col22 footer-col">
                    <strong>{{ T "footer-tab-legal" . }}</strong>
                    <ul>
                        {{ partial "footer-url" (slice "/contact" "footer-legal-notice") }}
                        {{ partial "footer-url" (slice "/privacy" "footer-privacy-policy") }}
                        {{ partial "footer-url" (slice "/privacy-controls" "footer-privacy-controls") }}
                        {{ partial "footer-url" (slice "/open-source" "footer-licenses" "license-notices") }}
                    </ul>
                </div>
                <div class="col22 footer-col" style="font-size: 10px; margin-top: 20px;">
                    {{ if eq .Lang "de" }}Wir arbeiten transparent nach Kriterien der <a href="{{ "/verein/transparenz" | absURL }}"><br><img src="/img/logo-itz.svg" alt="ITZ (Initiative Transparente Zivilgesellschaft)" class="itz-logo" width="539" height="146" loading="lazy"></a>{{ end }}
                </div>
            </div>
            <div class="clearfix"></div>
        </div>
    </footer>
    {{ partial "scripts" . }}
    {{ block "scripts" . }}
    {{ end }}
</body>

</html>
